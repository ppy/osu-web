/**
 *    Copyright (c) ppy Pty Ltd <contact@ppy.sh>. Licensed under the GNU Affero General Public License v3.0.
 *    See the LICENCE file in the repository root for full licence text.
 */

.header-v3 {
  @_top: header-v3;
  @_background-side-overflow: 200px;

  width: 100%;
  margin-bottom: -20px;
  padding-bottom: 20px;
  display: flex;
  align-items: flex-end;

  @media @desktop {
    min-height: @nav2-header-image-height;

    &--supporter {
      min-height: 450px
    }
  }

  &--chat {
    @media @desktop {
      margin-bottom: -210px;
    }
  }

  &__bg {
    .full-size();
    .at2x-simple('/images/headers/generic.jpg');
    background-color: @osu-colour-b6;
    background-position: center;
    background-size: (@container-sm + @_background-side-overflow * 2) auto;
    background-repeat: no-repeat;
    z-index: @z-index--header-bg;
    display: none;

    @media @desktop {
      display: block;
    }

    .@{_top}--changelog & {
      .at2x-simple('/images/headers/changelog.jpg');
    }

    .@{_top}--chat & {
      .at2x-simple('/images/headers/chat.jpg');
      filter: hue-rotate(115deg);
    }

    .@{_top}--news & {
      .at2x-simple('/images/headers/news.png');
    }

    .@{_top}--supporter & {
      opacity: 0.2;
      .at2x-simple('/images/headers/supporter.jpg');
    }
  }

  &__overlay {
    // side overflow
    .full-size();
    z-index: @z-index--header-bg;
    background-position: center;
    background-size: (@container-sm + @_background-side-overflow * 2) 100%;
    background-image: linear-gradient(to right,
      @osu-colour-b6,
      .osu-hsla(@osu-colour-b6, 0.5)[@hsla] (@_background-side-overflow / 4),
      .osu-hsla(@osu-colour-b6, 0.25)[@hsla] (@_background-side-overflow / 2),
      transparent @_background-side-overflow,
      transparent (@container-sm + @_background-side-overflow),
      .osu-hsla(@osu-colour-b6, 0.25)[@hsla] (@container-sm + @_background-side-overflow + @_background-side-overflow / 2),
      .osu-hsla(@osu-colour-b6, 0.5)[@hsla] (@container-sm + @_background-side-overflow + @_background-side-overflow * 3 / 4),
      @osu-colour-b6);
    display: none;

    // top to bottom overlay
    &::before {
      content: '';
      .full-size();
      background-image: linear-gradient(to bottom, @osu-colour-b6, transparent, @osu-colour-b6);
    }

    @media @desktop {
      display: block;
    }
  }

  &__spinner {
    .center-content();
    .full-size();
    font-size: 60px; // icon size
    background-color: fade(#000, 50%);
    color: #fff;
    padding-top: @nav2-height--pinned;
    display: none;

    @media @desktop {
      display: flex;
    }
  }
}
